/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/arrestsByRace.js":
/*!******************************!*\
  !*** ./src/arrestsByRace.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _exploreArrestsByYear__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./exploreArrestsByYear */ \"./src/exploreArrestsByYear.js\");\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ((data, rootElement) => {\n  Object(_exploreArrestsByYear__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\n    data,\n    rootElement,\n    [\n      {\n        offense: 'Drug abuse violations',\n        race: 'white',\n        color: 'red',\n      },\n      {\n        offense: 'Drug abuse violations',\n        race: 'black',\n        color: 'magenta',\n      },\n      {\n        offense: 'Drug abuse violations',\n        race: 'american_indian',\n        color: 'blue',\n      },\n      {\n        offense: 'Drug abuse violations',\n        race: 'asian',\n        color: 'green',\n      },\n    ],\n  );\n});\n\n\n//# sourceURL=webpack:///./src/arrestsByRace.js?");

/***/ }),

/***/ "./src/arrestsByYear.js":
/*!******************************!*\
  !*** ./src/arrestsByYear.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _chartHelpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chartHelpers */ \"./src/chartHelpers.js\");\n/* global d3 */\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ((data, rootElement) => {\n  const {\n    rootHeight,\n    rootWidth,\n    margin,\n    width,\n    height,\n  } = Object(_chartHelpers__WEBPACK_IMPORTED_MODULE_0__[\"initChart\"])(rootElement);\n\n  const structuredData = data\n    .filter((d) => d.offense === 'Drug abuse violations')\n    .sort((a, b) => +a.year - +b.year);\n\n  const arrestsIn1984 = structuredData.find((d) => d.year === '1984').total;\n\n  const drugRelatedArrestsByYear = d3.select('#drugRelatedArrestsByYear')\n    .append('svg')\n    .attr('width', rootWidth)\n    .attr('height', rootHeight)\n    .append('g')\n    .attr('transform', `translate(${margin.left},${margin.top})`);\n\n  const xScale = d3.scaleBand()\n    .domain(structuredData.map((d) => +d.year))\n    .range([0, width]).padding(0.4);\n\n  const yScale = d3.scaleLinear()\n    .domain([\n      Object(_chartHelpers__WEBPACK_IMPORTED_MODULE_0__[\"bumpDownYDomain\"])(d3.min(structuredData.map((d) => +d.total))),\n      Object(_chartHelpers__WEBPACK_IMPORTED_MODULE_0__[\"bumpUpYDomain\"])(d3.max(structuredData.map((d) => +d.total))),\n    ])\n    .range([height, 0]);\n\n  const tooltip = d3.select('#tooltip').size() ? d3.select('#tooltip') : (d3.select('body')\n    .append('div')\n    .attr('id', 'tooltip')\n    .attr('style', 'position: absolute; opacity: 0;')\n    .style('border-radius', '5px')\n    .style('padding', '10px')\n    .style('background-color', '#D3D3D3'));\n\n  const mouseover = (d) => {\n    d3.select('#tooltip')\n      .transition().duration(200).style('opacity', 1);\n    d3.select('#tooltip')\n      .html(`\n        <strong>Number of arrests for drug abuse violations</strong>\n        <p>${d.year}: ${d.total}</p>\n        <p>1984: ${arrestsIn1984}</p>\n      `);\n  };\n\n  const mousemove = () => {\n    d3.select('#tooltip')\n      .style('left', `${d3.event.pageX + 10}px`)\n      .style('top', `${d3.event.pageY + 10}px`);\n  };\n\n  const mouseout = () => {\n    tooltip\n      .transition()\n      .duration(200)\n      .style('opacity', 0);\n  };\n\n  // Add bars\n  drugRelatedArrestsByYear.append('g')\n    .selectAll('bar')\n    .data(structuredData)\n    .enter()\n    .append('rect')\n    .attr('x', (d) => xScale(+d.year))\n    .attr('width', xScale.bandwidth())\n    .attr('y', () => 0)\n    .attr('height', () => 0)\n    .style('fill', (d) => (d.year <= 1984 ? '#69b3a2' : '#AE7BB3'))\n    .on('mouseover', mouseover)\n    .on('mousemove', mousemove)\n    .on('mouseout', mouseout);\n\n  Object(_chartHelpers__WEBPACK_IMPORTED_MODULE_0__[\"addXAxis\"])({ chart: drugRelatedArrestsByYear, xScale, height, width, margin });\n  Object(_chartHelpers__WEBPACK_IMPORTED_MODULE_0__[\"addYAxis\"])({ chart: drugRelatedArrestsByYear, yScale, height, width, margin });\n\n  // Animation\n  drugRelatedArrestsByYear.selectAll('rect')\n    .transition()\n    .duration(400)\n    .attr('y', (d) => yScale(d.total))\n    .attr('height', (d) => height - yScale(d.total))\n    .delay((d, i) => i * 50);\n});\n\n\n//# sourceURL=webpack:///./src/arrestsByYear.js?");

/***/ }),

/***/ "./src/chartHelpers.js":
/*!*****************************!*\
  !*** ./src/chartHelpers.js ***!
  \*****************************/
/*! exports provided: initChart, bumpUpYDomain, bumpDownYDomain, addXAxis, addYAxis, addCategoryLegend */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"initChart\", function() { return initChart; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"bumpUpYDomain\", function() { return bumpUpYDomain; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"bumpDownYDomain\", function() { return bumpDownYDomain; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"addXAxis\", function() { return addXAxis; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"addYAxis\", function() { return addYAxis; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"addCategoryLegend\", function() { return addCategoryLegend; });\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers */ \"./src/helpers.js\");\n/* global d3 */\n\n\nconst initChart = (rootElement) => {\n  while (rootElement.firstElementChild) {\n    rootElement.removeChild(rootElement.firstElementChild);\n  }\n\n  const rootHeight = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"outerHeight\"])(rootElement);\n  const rootWidth = Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"outerWidth\"])(rootElement);\n  const margin = {\n    top: Math.floor(rootHeight / 10),\n    right: Math.floor(rootWidth / 10),\n    bottom: Math.floor(rootHeight / 8),\n    left: Math.floor(rootWidth / 8),\n  };\n  const width = rootWidth - margin.left - margin.right;\n  const height = rootHeight - margin.top - margin.bottom;\n\n  return {\n    rootHeight,\n    rootWidth,\n    margin,\n    width,\n    height,\n  };\n};\n\nconst bumpUpYDomain = (maxVal) => {\n  const bumped = maxVal * 1.03;\n  if (maxVal > 100) {\n    return Math.ceil(bumped);\n  }\n  return bumped;\n};\n\nconst bumpDownYDomain = (maxVal) => {\n  const bumped = maxVal * 0.8;\n  if (maxVal > 100) {\n    return Math.ceil(bumped);\n  }\n  return bumped;\n};\n\nconst addXAxis = ({ chart, xScale, height, width, margin }) => {\n  chart.append('g')\n    .attr('transform', `translate(0,${height})`)\n    .call(d3.axisBottom(xScale).tickFormat((d, i) => d.toString()))\n    .selectAll('text')\n    .style('text-anchor', 'end')\n    .attr('dx', '-.8em')\n    .attr('dy', '.15em')\n    .attr('transform', 'rotate(-65)');\n\n  // text label for the x axis\n  chart.append('text')\n    .attr('transform', `translate(${width / 2},${height + margin.top + 10})`)\n    .style('text-anchor', 'middle')\n    .text('Year');\n};\n\nconst addYAxis = ({ chart, yScale, height, width, margin }) => {\n  // Add Y axis\n  chart.append('g')\n    .call(d3.axisLeft(yScale));\n\n  // text label for the y axis\n  chart.append('text')\n    .attr('transform', 'rotate(-90)')\n    .attr('y', 0 - margin.left + 10)\n    .attr('x', 0 - (height / 2))\n    .attr('dy', '1em')\n    .style('text-anchor', 'middle')\n    .text('Number of arrests');\n};\n\nconst addCategoryLegend = ({\n  chart,\n  height,\n  width,\n  margin,\n  categories,\n  colorScale,\n}) => {\n  const svgLegend = chart.append('g')\n    .attr('class', 'gLegend')\n    .attr('transform', `translate(${20},${0})`);\n\n  const legend = svgLegend.selectAll('.legend')\n    .data(categories)\n    .enter().append('g')\n    .attr('class', 'legend')\n    .attr('transform', (d, i) => `translate(0,${i * 20})`);\n\n  legend.append('circle')\n    .attr('class', 'legend-node')\n    .attr('cx', 0)\n    .attr('cy', 0)\n    .attr('r', 5)\n    .style('fill', (d) => colorScale(d));\n\n  legend.append('text')\n    .attr('class', 'legend-text')\n    .attr('x', 5 * 2)\n    .attr('y', 5 / 2)\n    .style('fill', '#000000')\n    .style('font-size', 12)\n    .text((d) => d);\n};\n\n\n//# sourceURL=webpack:///./src/chartHelpers.js?");

/***/ }),

/***/ "./src/configEditor.js":
/*!*****************************!*\
  !*** ./src/configEditor.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _exploreArrestsByYear__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./exploreArrestsByYear */ \"./src/exploreArrestsByYear.js\");\n/* global document */\n\n\nlet exploreData;\nconst currentConfigs = {};\n\nconst renderNewConfigItem = (config, currentConfigsElement) => {\n  const newConfigItem = document.createElement('div');\n  newConfigItem.setAttribute('id', config.id);\n  const itemSpan = document.createElement('span');\n  itemSpan.textContent = `offense: ${config.offense}, race: ${config.race}, color: ${config.color}`;\n  const configRemoveButton = document.createElement('button');\n  configRemoveButton.textContent = 'X';\n  configRemoveButton.addEventListener('click', () => {\n    document.getElementById(config.id).remove();\n    delete currentConfigs[config.id];\n    Object(_exploreArrestsByYear__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(exploreData, document.getElementById('exploreChart'), Object.values(currentConfigs));\n  });\n  newConfigItem.appendChild(itemSpan);\n  newConfigItem.appendChild(configRemoveButton);\n  currentConfigsElement.appendChild(newConfigItem);\n};\n\nconst renderCurrentConfigsElement = (currentConfigsElement) => {\n  while (currentConfigsElement.firstElementChild) {\n    currentConfigsElement.removeChild(currentConfigsElement.firstElementChild);\n  }\n  Object.values(currentConfigs).forEach((config) => {\n    renderNewConfigItem(config, currentConfigsElement);\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ((data) => {\n  exploreData = data;\n  const configEditor = document.getElementById('configEditor');\n  while (configEditor.firstElementChild) {\n    configEditor.removeChild(configEditor.firstElementChild);\n  }\n  const categories = ['white', 'black', 'american_indian', 'asian', 'total'];\n  const offenses = new Set();\n  exploreData.forEach((d) => {\n    offenses.add(d.offense);\n  });\n\n  const offenseSelect = document.createElement('select');\n  offenseSelect.setAttribute('id', 'offenseSelect');\n  offenseSelect.setAttribute('name', 'offenseSelect');\n  offenseSelect.insertAdjacentHTML('beforeend', `\n    <option value=\"\">--Please choose an offense--</option>\n    ${Array.from(offenses).reduce(\n      (res, val) => `${res}<option value=\"${val}\">${val}</option>`, ''\n    )}\n  `);\n\n  const raceSelect = document.createElement('select');\n  raceSelect.setAttribute('id', 'raceSelect');\n  raceSelect.setAttribute('name', 'raceSelect');\n  raceSelect.insertAdjacentHTML('beforeend', `\n    <option value=\"\">--Please choose a race--</option>\n    ${categories.reduce(\n      (res, val) => `${res}<option value=\"${val}\">${val}</option>`, ''\n    )}\n  `);\n\n  const colorInput = document.createElement('input');\n  colorInput.setAttribute('id', 'colorInput');\n  colorInput.setAttribute('name', 'colorInput');\n  colorInput.setAttribute('placeholder', 'Ex: #123456 || red');\n  colorInput.setAttribute('size', 16);\n\n  const currentConfigsElement = document.createElement('div');\n  currentConfigsElement.setAttribute('id', 'currentConfigs');\n\n  const addConfigButton = document.createElement('button');\n  addConfigButton.setAttribute('id', 'addConfigButton');\n  addConfigButton.textContent = '+';\n  addConfigButton.addEventListener('click', () => {\n    const offense = document.getElementById('offenseSelect').value;\n    const race = document.getElementById('raceSelect').value;\n    const color = document.getElementById('colorInput').value;\n    if (!offense || !race || !color) return;\n    const configId = Math.random().toString().slice(2).toString(16);\n    currentConfigs[configId] = {\n      id: configId, offense, race, color,\n    };\n    renderNewConfigItem(currentConfigs[configId], currentConfigsElement);\n    Object(_exploreArrestsByYear__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(exploreData, document.getElementById('exploreChart'), Object.values(currentConfigs));\n  });\n\n  configEditor.appendChild(offenseSelect);\n  configEditor.appendChild(raceSelect);\n  configEditor.appendChild(colorInput);\n  configEditor.appendChild(addConfigButton);\n  configEditor.appendChild(currentConfigsElement);\n  renderCurrentConfigsElement(currentConfigsElement);\n  Object(_exploreArrestsByYear__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(exploreData, document.getElementById('exploreChart'), Object.values(currentConfigs));\n});\n\n\n//# sourceURL=webpack:///./src/configEditor.js?");

/***/ }),

/***/ "./src/exploreArrestsByYear.js":
/*!*************************************!*\
  !*** ./src/exploreArrestsByYear.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _chartHelpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chartHelpers */ \"./src/chartHelpers.js\");\n/* global d3 */\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ((data, rootElement, gridConfigs) => {\n  const {\n    rootHeight,\n    rootWidth,\n    margin,\n    width,\n    height,\n  } = Object(_chartHelpers__WEBPACK_IMPORTED_MODULE_0__[\"initChart\"])(rootElement);\n\n  const colorMap = {};\n  const races = [];\n  const offenses = [];\n  const genCategoryKey = (offense, race) => `${offense} by ${race}`;\n  gridConfigs.forEach((config) => {\n    colorMap[genCategoryKey(config.offense, config.race)] = config.color;\n    if (!races.includes(config.race)) races.push(config.race);\n    if (!offenses.includes(config.offense)) offenses.push(config.offense);\n  });\n\n  const structuredData = [];\n  data.filter((d) => offenses.includes(d.offense))\n    .sort((a, b) => (+a.year) - (+b.year))\n    .forEach((d) => {\n      races.forEach((race) => {\n        structuredData.push({\n          year: d.year,\n          total: d[race],\n          category: genCategoryKey(d.offense, race),\n        });\n      });\n    });\n\n  const lineOpacity = 1;\n  const lineStroke = '2px';\n\n  const colorScale = d3.scaleOrdinal()\n    .domain(Object.keys(colorMap))\n    .range(Object.keys(colorMap).map((key) => colorMap[key]));\n\n  const timeScale = d3.scaleTime()\n    .domain(d3.extent(structuredData, (d) => d.year))\n    .range([0, width]);\n\n  const xScale = d3.scaleLinear()\n    .domain([d3.min(structuredData, (d) => +d.year), d3.max(structuredData, (d) => +d.year)])\n    .range([0, width]);\n\n  const yScale = d3.scaleLinear()\n    .domain([0, Object(_chartHelpers__WEBPACK_IMPORTED_MODULE_0__[\"bumpUpYDomain\"])(d3.max(structuredData, (d) => +d.total))])\n    .range([height, 0]);\n\n  const svg = d3.select(`#${rootElement.id}`).append('svg')\n    .attr('width', width + margin.left + margin.right)\n    .attr('height', height + margin.top + margin.bottom)\n    .append('g')\n    .attr('transform', `translate(${margin.left},${margin.top})`);\n\n  Object(_chartHelpers__WEBPACK_IMPORTED_MODULE_0__[\"addXAxis\"])({ chart: svg, xScale, height, width, margin });\n  Object(_chartHelpers__WEBPACK_IMPORTED_MODULE_0__[\"addYAxis\"])({ chart: svg, yScale, height, width, margin });\n  Object(_chartHelpers__WEBPACK_IMPORTED_MODULE_0__[\"addCategoryLegend\"])({ chart: svg, categories: Object.keys(colorMap), colorScale, height, width, margin });\n\n  // line generator\n  const line = d3.line()\n    .x((d) => xScale(d.year))\n    .y((d) => yScale(d.total));\n\n  const nestedData = d3.nest()\n    .key((d) => d.category)\n    .entries(structuredData);\n\n  // APPEND MULTIPLE LINES //\n  const lines = svg.append('g')\n    .attr('class', 'lines');\n\n  const glines = lines.selectAll('.line-group')\n    .data(nestedData).enter()\n    .append('g')\n    .attr('class', 'line-group');\n\n  glines\n    .append('path')\n    .attr('class', 'line')\n    .attr('d', (d) => line(d.values))\n    .style('stroke', (d, i) => colorScale(d.key))\n    .style('fill', 'none')\n    .style('opacity', lineOpacity)\n    .style('stroke-width', lineStroke);\n\n  // // Add vertical for 1984\n  svg.append('line')\n    .attr('x1', xScale(1984))\n    .attr('y1', 0)\n    .attr('x2', xScale(1984))\n    .attr('y2', height)\n    .style('stroke-width', 3)\n    .style('stroke', 'black')\n    .style('fill', 'none');\n\n  // CREATE HOVER TOOLTIP WITH VERTICAL LINE //\n  const tooltip = d3.select('#race-tooltip').size()\n    ? d3.select('#race-tooltip')\n    : (d3.select('body').append('div')\n      .attr('id', 'race-tooltip')\n      .style('position', 'absolute')\n      .style('background-color', '#D3D3D3')\n      .style('padding', '10px')\n      .style('display', 'none'));\n\n  const mousemove = () => {\n    d3.select('#race-tooltip')\n      .style('left', `${d3.event.pageX + 10}px`)\n      .style('top', `${d3.event.pageY + 10}px`);\n  };\n\n  const mouseG = svg.append('g')\n    .attr('class', 'mouse-over-effects');\n\n  mouseG.append('path') // create vertical line to follow mouse\n    .attr('class', 'mouse-line')\n    .style('stroke', '#A9A9A9')\n    .style('stroke-width', lineStroke)\n    .style('opacity', '0');\n\n  const mousePerLine = mouseG.selectAll('.mouse-per-line')\n    .data(nestedData)\n    .enter()\n    .append('g')\n    .attr('class', 'mouse-per-line');\n\n  mousePerLine.append('circle')\n    .attr('r', 4)\n    .style('stroke', (d) => colorScale(d.key))\n    .style('fill', 'none')\n    .style('stroke-width', lineStroke)\n    .style('opacity', '0');\n\n  mouseG.append('svg:rect') // append a rect to catch mouse movements on canvas\n    .attr('width', width)\n    .attr('height', height)\n    .attr('fill', 'none')\n    .attr('pointer-events', 'all')\n    .on('mouseout', () => { // on mouse out hide line, circles and text\n      d3.select('.mouse-line')\n        .style('opacity', '0');\n      d3.selectAll('.mouse-per-line circle')\n        .style('opacity', '0');\n      d3.selectAll('.mouse-per-line text')\n        .style('opacity', '0');\n      d3.selectAll('#race-tooltip')\n        .style('display', 'none');\n    })\n    .on('mouseover', () => { // on mouse in show line, circles and text\n      d3.select('.mouse-line')\n        .style('opacity', '1');\n      d3.selectAll('.mouse-per-line circle')\n        .style('opacity', '1');\n      d3.selectAll('#race-tooltip')\n        .style('display', 'block');\n    })\n    .on('mousemove', function () {\n      const mouse = d3.mouse(this);\n      d3.selectAll('.mouse-per-line')\n        .attr('transform', (d, i) => {\n          const xDate = timeScale.invert(mouse[0]); // use 'invert' to get date corresponding to distance from mouse position relative to svg\n          const bisect = d3.bisector((d) => d.year).left; // retrieve row index of date on parsed csv\n          const idx = bisect(d.values, xDate);\n\n          d3.select('.mouse-line')\n            .attr('d', () => {\n              let data = 'M' + xScale(+d.values[idx].year) + ',' + (height);\n              data += ' ' + xScale(+d.values[idx].year) + ',' + 0;\n              return data;\n            });\n\n          return 'translate(' + xScale(+d.values[idx].year) + ',' + yScale(d.values[idx].total) + ')';\n        });\n      updateTooltipContent(mouse);\n      mousemove();\n    });\n\n\n  function updateTooltipContent(mouse) {\n    const sortingObj = [];\n    nestedData.map((d) => {\n      const xDate = timeScale.invert(mouse[0]);\n      const bisect = d3.bisector((d) => d.year).left;\n      const idx = bisect(d.values, xDate);\n      sortingObj.push({\n        key: d.values[idx].category, total: d.values[idx].total, year: d.values[idx].year,\n      });\n    });\n\n    sortingObj.sort((x, y) => d3.descending(+x.total, +y.total));\n\n    const sortingArr = sortingObj.map((d) => d.key);\n\n    const resNested = nestedData.slice()\n      .sort((a, b) => sortingArr.indexOf(a.key) - sortingArr.indexOf(b.key));\n\n    tooltip.html(`${sortingObj[0].year}`)\n      .style('display', 'block')\n      .style('left', d3.event.pageX + 20)\n      .style('top', d3.event.pageY - 20)\n      .style('font-size', 11.5)\n      .selectAll()\n      .data(resNested)\n      .enter() // for each vehicle races, list out name and price of premium\n      .append('div')\n      .style('color', (d) => colorScale(d.key))\n      .style('font-size', 10)\n      .html((d) => {\n        const xDate = timeScale.invert(mouse[0]);\n        const bisect = d3.bisector((d) => d.year).left;\n        const idx = bisect(d.values, xDate);\n        return `${d.key}: ${d.values[idx].total.toString()}`;\n      });\n  }\n});\n\n\n//# sourceURL=webpack:///./src/exploreArrestsByYear.js?");

/***/ }),

/***/ "./src/helpers.js":
/*!************************!*\
  !*** ./src/helpers.js ***!
  \************************/
/*! exports provided: outerHeight, outerWidth */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"outerHeight\", function() { return outerHeight; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"outerWidth\", function() { return outerWidth; });\nconst outerHeight = (el) => {\n  const style = window.getComputedStyle(el);\n  return el.offsetHeight\n    + window.parseInt(style.marginTop)\n    + window.parseInt(style.marginBottom);\n};\n\nconst outerWidth = (el) => {\n  const style = window.getComputedStyle(el);\n  return el.offsetWidth\n    + window.parseInt(style.marginLeft)\n    + window.parseInt(style.marginRight);\n};\n\n\n//# sourceURL=webpack:///./src/helpers.js?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _arrestsByYear__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arrestsByYear */ \"./src/arrestsByYear.js\");\n/* harmony import */ var _arrestsByRace__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./arrestsByRace */ \"./src/arrestsByRace.js\");\n/* harmony import */ var _configEditor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./configEditor */ \"./src/configEditor.js\");\n/* harmony import */ var _page__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./page */ \"./src/page.js\");\n/* harmony import */ var _navbar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./navbar */ \"./src/navbar.js\");\n/* harmony import */ var _slideAnimation__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./slideAnimation */ \"./src/slideAnimation.js\");\n/* global document, d3, window */\n\n\n\n\n\n\n\nObject(_page__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\nObject(_slideAnimation__WEBPACK_IMPORTED_MODULE_5__[\"default\"])();\nObject(_navbar__WEBPACK_IMPORTED_MODULE_4__[\"default\"])();\nd3.csv('data/arrestsByYearWithRace.csv').then((data) => {\n  Object(_configEditor__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(data);\n  Object(_arrestsByYear__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\n    data,\n    document.querySelector('#drugRelatedArrestsByYear'),\n  );\n  Object(_arrestsByRace__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(\n    data,\n    document.querySelector('#drugRelatedArrestsByRace'),\n  );\n  window.addEventListener('resize', () => {\n    Object(_arrestsByYear__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\n      data,\n      document.querySelector('#drugRelatedArrestsByYear'),\n    );\n    Object(_arrestsByRace__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(\n      data,\n      document.querySelector('#drugRelatedArrestsByRace'),\n    );\n    Object(_configEditor__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(data);\n  });\n  document.getElementById('drugRelatedArrestsByYear')\n    .addEventListener('animationend', (event) => {\n      const drugRelatedArrestsByYear = document\n        .querySelector('#drugRelatedArrestsByYear');\n      if (\n        event.animationName === 'fade-in-long'\n      ) {\n        Object(_arrestsByYear__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(data, drugRelatedArrestsByYear);\n      }\n    });\n});\n\n\n//# sourceURL=webpack:///./src/index.js?");

/***/ }),

/***/ "./src/navbar.js":
/*!***********************!*\
  !*** ./src/navbar.js ***!
  \***********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* global document window */\nlet toc;\nlet tocPath;\nlet tocItems;\n\n// Factor of screen size that the element must cross\n// before it's considered visible\nconst TOP_MARGIN = 0;\nconst BOTTOM_MARGIN = 0.2;\n\nlet pathLength;\n\nlet lastPathStart;\nlet lastPathEnd;\n\nconst sync = () => {\n  const windowHeight = window.innerHeight;\n\n  let pathStart = pathLength;\n  let pathEnd = 0;\n\n  let visibleItems = 0;\n\n  tocItems.forEach((item) => {\n    const targetBounds = item.target.getBoundingClientRect();\n\n    if (targetBounds.bottom > windowHeight * TOP_MARGIN\n      && targetBounds.top < windowHeight * (1 - BOTTOM_MARGIN)) {\n      pathStart = Math.min(item.pathStart, pathStart);\n      pathEnd = Math.max(item.pathEnd, pathEnd);\n\n      visibleItems += 1;\n\n      item.listItem.classList.add('visible');\n    } else {\n      item.listItem.classList.remove('visible');\n    }\n  });\n\n  // Specify the visible path or hide the path altogether\n  // if there are no visible items\n  if (visibleItems > 0 && pathStart < pathEnd) {\n    if (pathStart !== lastPathStart || pathEnd !== lastPathEnd) {\n      tocPath.setAttribute('stroke-dashoffset', '1');\n      tocPath.setAttribute(\n        'stroke-dasharray',\n        `1, ${pathStart}, ${pathEnd - pathStart}, ${pathLength}`,\n      );\n      tocPath.setAttribute('opacity', 1);\n    }\n  } else {\n    tocPath.setAttribute('opacity', 0);\n  }\n\n  lastPathStart = pathStart;\n  lastPathEnd = pathEnd;\n};\n\nconst drawPath = () => {\n  tocItems = [].slice.call(toc.querySelectorAll('li'));\n\n  // Cache element references and measurements\n  tocItems = tocItems.map((item) => {\n    const anchor = item.querySelector('a');\n    const target = document.querySelector(\n      `#${anchor.getAttribute('href').slice(1)}`,\n    );\n\n    return {\n      listItem: item,\n      anchor,\n      target,\n    };\n  });\n\n  // Remove missing targets\n  tocItems = tocItems.filter((item) => !!item.target);\n\n  const path = [];\n  let pathIndent;\n\n  tocItems.forEach((item, i) => {\n    const x = item.anchor.offsetLeft - 5;\n    const y = item.anchor.offsetTop;\n    const height = item.anchor.offsetHeight;\n\n    if (i === 0) {\n      path.push('M', x, y, 'L', x, y + height);\n      item.pathStart = 0;\n    } else {\n      // Draw an additional line when there's a change in\n      // indent levels\n      if (pathIndent !== x) path.push('L', pathIndent, y);\n\n      path.push('L', x, y);\n\n      // Set the current path so that we can measure it\n      tocPath.setAttribute('d', path.join(' '));\n      item.pathStart = tocPath.getTotalLength() || 0;\n\n      path.push('L', x, y + height);\n    }\n\n    pathIndent = x;\n\n    tocPath.setAttribute('d', path.join(' '));\n    item.pathEnd = tocPath.getTotalLength();\n  });\n\n  pathLength = tocPath.getTotalLength();\n\n  sync();\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (() => {\n  toc = document.querySelector('.toc');\n  tocPath = document.querySelector('.toc-marker path');\n  drawPath();\n  window.addEventListener('resize', drawPath, false);\n  window.addEventListener('scroll', sync, false);\n});\n\n\n//# sourceURL=webpack:///./src/navbar.js?");

/***/ }),

/***/ "./src/page.js":
/*!*********************!*\
  !*** ./src/page.js ***!
  \*********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* global document */\n/* harmony default export */ __webpack_exports__[\"default\"] = (() => {\n  const ROOT_ELEMENT_ID = 'root';\n  const rootElement = document.getElementById(ROOT_ELEMENT_ID);\n\n  // parent div for the narrative\n  const narrative = document.createElement('div');\n  narrative.classList.add('page-content');\n  narrative.classList.add('flex');\n\n  // Add animation class, and listener. Will not start until added to DOM.\n  narrative.classList.add('fade-in');\n  narrative.addEventListener('animationend', function animated(event) {\n    if (event.animationName === 'fade-in') {\n      narrative.classList.remove('fade-in');\n      narrative.removeEventListener('animationend', animated);\n    }\n  });\n\n  const sectionMap = {\n    intro: 'War on Drugs: A Failing Solution',\n    arrestsByYear: 'Drug related arrests since 1980',\n    arrestsByRace: 'Drug related arrests since 1980 by race',\n    explore: 'Explore arrest data since 1980',\n  };\n\n  const sectionIds = Object.keys(sectionMap);\n  const sectionTitles = Object.values(sectionMap);\n\n  // Add HTML and JavaScript to narrative node\n  const navbarHtml = `\n  <nav class=\"toc\">\n    <ul>\n      <li>\n        <a href=\"#${sectionIds[0]}\" onClick=\"slideOpactiyUpdate()\">\n          ${sectionTitles[0]}\n        </a>\n      </li>\n      <li>\n        <a href=\"#${sectionIds[1]}\" onClick=\"slideOpactiyUpdate()\">\n          ${sectionTitles[1]}\n        </a>\n      </li>\n      <li>\n        <a href=\"#${sectionIds[2]}\" onClick=\"slideOpactiyUpdate()\">\n          ${sectionTitles[2]}\n        </a>\n      </li>\n      <li>\n        <a href=\"#${sectionIds[3]}\" onClick=\"slideOpactiyUpdate()\">\n          ${sectionTitles[3]}\n        </a>\n      </li>\n    </ul>\n    <svg class=\"toc-marker\" width=\"200\" height=\"200\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path stroke=\"#444\" stroke-width=\"3\" fill=\"transparent\" stroke-dasharray=\"0, 0, 0, 1000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" transform=\"translate(-0.5, -0.5)\" />\n    </svg>\n  </nav>\n  `;\n\n  const articleHtml = `\n  <article class=\"contents\">\n    <div class=\"section-holder\">\n      <section class=\"hidden\">\n        <h1 id=\"${sectionIds[0]}\">${sectionTitles[0]}</h1>\n        <p>\n          The war on drugs, coined by Nixon in 1971, is a global campaign led by the U.S. federal government aiming to reduce the illegal drug trade in the United States.\n          Nixon's administration dramatically increased the size and presence of federal drug control agencies, and pushed through measures such as mandatory sentencing and no-knock warrants.\n        </p>\n        <p>\n          Although Nixon's administration increased the power of drug control agencies, they did repeal the federal 2â€“10-year mandatory minimum sentences\n          for possession of marijuana in 1970. They also started federal demand reduction programs and drug-treatment programs.\n          The ease on marijuana policy continued between 1973 and 1977, which saw eleven states decriminalize marijuana possession.\n          President Jimmy Carter won the election on a campaign platform that included marijuana decriminalization.\n          In October of 1977, the Senate Judiciary Committee voted to decriminalize possession of up to an ounce of marijuana for personal use.\n        </p>\n        <p>\n          Public perception took a shift however when parents became increasingly worried about the high rate of marijuana usage among teens.\n          In the first term of his presidency Ronald Reagan signed the <strong>Comprehensive Crime Control Act of 1984</strong>.\n          The act expanded penalties towards possession of cannabis, established a federal system of mandatory minimum sentences, and established procedures for civil asset forfeiture.\n        </p>\n        <p>\n          In recent years, the \"War on Drugs\" has seen some criticism. Some of those criticisms are that it has not fixed the drug problem in the United States,\n          and that it disproportionately targets minorities.\n        </p>\n        <p>\n          We will be taking a look at the number of drug related arrests in aggregate, by race, and in relation to other offenses since 1980 to see if there is any\n          correlation with the Comprehensive Crime Control Act of 1984.\n        </p>\n      </section>\n    </div>\n    <div class=\"section-holder\">\n      <section class=\"hidden\">\n        <h1 id=\"${sectionIds[1]}\">${sectionTitles[1]}</h1>\n        <p>\n          Here is a chart of the number of arrests for drug abuse violations since the year 1980. The change in color marks the passing of the Comprehensive Crime Control Act of 1984.\n        </p>\n        <div class=\"chart\" id=\"drugRelatedArrestsByYear\"></div>\n        <p>\n          There is a significant increase in the number of drug abuse violation arrests after 1984. The number has more than doubled since then.\n          The \"War on Drugs\" has clearly not reduced the number of drug related incidents in the last 25 years.\n        </p>\n      </section>\n    </div>\n    <div class=\"section-holder\">\n      <section class=\"hidden\">\n        <h1 id=\"${sectionIds[2]}\">${sectionTitles[2]}</h1>\n        <p>\n          Here is a chart of the number of arrests for drug abuse violations by race since the year 1980.\n          The black vertical line marks the passing of the Comprehensive Crime Control Act of 1984.\n        </p>\n        <div class=\"chart\" id=\"drugRelatedArrestsByRace\"></div>\n        <p>\n          From the given graph, it can be seen that no race has seen disproportionate growth in relation to their state in 1984.\n          That being said, blacks accounted for ~28% of all drug abuse violation arrests in 2017 while only comprising ~13% of the population.\n          Roughly the same was true in 1984, ~30%:~12%.\n        </p>\n        <p>In the next section you, the reader, will be able to investigate trends over the years further by selecting what you wish to show.</p>\n      </section>\n    </div>\n    <div class=\"section-holder\">\n      <section class=\"hidden\">\n        <h1 id=\"${sectionIds[3]}\">${sectionTitles[3]}</h1>\n        <p>\n          In general, you will notice a downwards trend in offenses other than drug abuse violations.\n        </p>\n        <p>\n          To add a new line to the chart, fill in the three inputs and click on the '+' button.\n          <br>\n          To remove a line from the chart, click on the 'X' button next to an entry in the list.\n        <div class=\"chart\" id=\"exploreChart\"></div>\n        <div id=\"configEditor\"></div>\n      </section>\n    </div>\n  </article>\n  `;\n\n  narrative.insertAdjacentHTML('beforeend', navbarHtml);\n  narrative.insertAdjacentHTML('beforeend', articleHtml);\n\n  // Add animation to splash page, and add new page to DOM\n  const splashPage = rootElement.firstElementChild;\n  splashPage.addEventListener('animationend', () => {\n    splashPage.remove();\n  });\n  splashPage.classList.add('fade-out');\n\n  // Add narrative to dom right after triggering out animation\n  rootElement.appendChild(narrative);\n});\n\n\n//# sourceURL=webpack:///./src/page.js?");

/***/ }),

/***/ "./src/slideAnimation.js":
/*!*******************************!*\
  !*** ./src/slideAnimation.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers */ \"./src/helpers.js\");\n/* global document, window */\n\n\nlet LAST_KNOWN_Y = 0;\nconst slideOpactiyUpdate = () => {\n  const windowHeight = window.innerHeight;\n  const viewTop = window.scrollY;\n  const viewMidpoint = viewTop + windowHeight / 2;\n  const viewBottom = viewTop + windowHeight;\n  const scrollDirection = viewTop > LAST_KNOWN_Y ? 'down' : 'up';\n\n  const sections = document.querySelectorAll('section');\n  const sectionHolders = document.querySelectorAll('.section-holder');\n  const sectionOffests = [0];\n  sectionHolders.forEach((sectionHolder, index) => {\n    if (index !== 0) {\n      sectionOffests.push(\n        Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"outerHeight\"])(sectionHolders[index - 1]) + sectionOffests[index - 1],\n      );\n    }\n  });\n\n  const isOutSlide = (sectionTopOffset, sectionBottomOffest) => {\n    if (\n      scrollDirection === 'down'\n      && sectionBottomOffest < viewMidpoint\n      && sectionBottomOffest > viewTop\n    ) {\n      return true;\n    }\n\n    if (\n      scrollDirection === 'up'\n      && sectionTopOffset > viewMidpoint\n      && sectionTopOffset < viewBottom\n    ) {\n      return true;\n    }\n\n    return false;\n  };\n\n  const isInSlide = (sectionTopOffset, sectionBottomOffest) => {\n    if (\n      scrollDirection === 'down'\n      && sectionTopOffset < viewMidpoint\n      && sectionTopOffset > viewTop - 50\n    ) {\n      return true;\n    }\n\n    if (\n      scrollDirection === 'up'\n      && sectionBottomOffest > viewMidpoint + 10\n      && sectionBottomOffest < viewBottom + 10\n    ) {\n      return true;\n    }\n\n    return false;\n  };\n\n  let outSlideTop;\n  let outSlideBottom;\n  let outSlide;\n  let inSlideTop;\n  let inSlideBottom;\n  let inSlide;\n\n  // NodeLists only have forEach available, so no find()\n  sections.forEach((section, index) => {\n    const sectionTopOffset = sectionOffests[index];\n    const sectionBottomOffest = sectionTopOffset + Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"outerHeight\"])(section);\n    if (isOutSlide(sectionTopOffset, sectionBottomOffest)) {\n      outSlideTop = sectionTopOffset;\n      outSlideBottom = sectionBottomOffest;\n      outSlide = section;\n    }\n  });\n\n  sections.forEach((section, index) => {\n    const sectionTopOffset = sectionOffests[index];\n    const sectionBottomOffest = sectionTopOffset + Object(_helpers__WEBPACK_IMPORTED_MODULE_0__[\"outerHeight\"])(section);\n    if (isInSlide(sectionTopOffset, sectionBottomOffest)) {\n      inSlideTop = sectionTopOffset;\n      inSlideBottom = sectionBottomOffest;\n      inSlide = section;\n    }\n  });\n\n  const animationIn = 'fade-in-long';\n  const animationOut = 'fade-out-long';\n\n  const hasOneOf = (section, classNames) => !!classNames.find(\n    (className) => section.classList.contains(className),\n  );\n\n  if (outSlide && !hasOneOf(outSlide, ['hidden', 'fade-out-long'])) {\n    outSlide.classList.remove('visible');\n    outSlide.classList.remove(animationIn);\n    outSlide.addEventListener('animationend', function animated(event) {\n      if (event.animationName === animationOut) {\n        outSlide.classList.remove(animationOut);\n        outSlide.classList.add('hidden');\n        outSlide.removeEventListener('animationend', animated);\n      }\n    });\n    outSlide.classList.add(animationOut);\n  }\n\n  if (inSlide && !hasOneOf(inSlide, ['visible', 'fade-in-long'])) {\n    inSlide.classList.remove('hidden');\n    inSlide.classList.remove(animationOut);\n    inSlide.addEventListener('animationend', function animated(event) {\n      if (event.animationName === animationIn) {\n        inSlide.classList.remove(animationIn);\n        inSlide.classList.add('visible');\n        inSlide.removeEventListener('animationend', animated);\n      }\n    });\n    inSlide.classList.add(animationIn);\n  }\n\n  // console.log({\n  //   LAST_KNOWN_Y,\n  //   viewTop,\n  //   scrollDirection,\n  //   inSlide,\n  //   outSlide,\n  //   windowHeight,\n  //   viewMidpoint,\n  //   outSlideBottom,\n  //   outSlideTop,\n  //   inSlideTop,\n  //   inSlideBottom,\n  // });\n\n  LAST_KNOWN_Y = viewTop;\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (() => {\n  slideOpactiyUpdate();\n  window.addEventListener('scroll', slideOpactiyUpdate);\n});\n\n\n//# sourceURL=webpack:///./src/slideAnimation.js?");

/***/ })

/******/ });